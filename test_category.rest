###
# Tests API Category - CRUD Operations
# Base URL: http://localhost:3000/api/category
###

# Variables pour les tests
@baseUrl = http://localhost:3000
@categoryId = {{categoryId}}
@shopId = {{shopId}}

###
# 1. R√âCUP√âRER TOUTES LES CAT√âGORIES
GET {{baseUrl}}/api/category
Content-Type: application/json

###
# 2. R√âCUP√âRER LES CAT√âGORIES D'UNE BOUTIQUE SP√âCIFIQUE
GET {{baseUrl}}/api/category?shopId={{shopId}}
Content-Type: application/json

###
# 3. R√âCUP√âRER LES CAT√âGORIES ACTIVES SEULEMENT
GET {{baseUrl}}/api/category?isActive=true
Content-Type: application/json

###
# 4. R√âCUP√âRER LES CAT√âGORIES AVEC FILTRES COMBIN√âS
GET {{baseUrl}}/api/category?shopId={{shopId}}&isActive=true
Content-Type: application/json

###
# 5. CR√âER UNE NOUVELLE CAT√âGORIE
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "√âlectronique",
  "description": "Appareils √©lectroniques et accessoires high-tech",
  "imageUrl": "https://example.com/electronics-category.jpg",
  "isActive": true,
  "shopId": "{{shopId}}"
}

###
# 6. CR√âER UNE CAT√âGORIE AVEC DONN√âES MINIMALES
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "V√™tements",
  "shopId": "{{shopId}}"
}

###
# 7. CR√âER UNE CAT√âGORIE AVEC DESCRIPTION LONGUE
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Maison et Jardin",
  "description": "Tout pour la maison et le jardin : meubles, d√©coration, outils de jardinage, plantes, accessoires d'int√©rieur et d'ext√©rieur pour cr√©er un espace de vie confortable et harmonieux.",
  "imageUrl": "https://example.com/home-garden.jpg",
  "isActive": true,
  "shopId": "{{shopId}}"
}

###
# 8. R√âCUP√âRER UNE CAT√âGORIE SP√âCIFIQUE PAR ID
GET {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

###
# 9. METTRE √Ä JOUR UNE CAT√âGORIE (PATCH - route g√©n√©rale)
PATCH {{baseUrl}}/api/category
Content-Type: application/json

{
  "id": "{{categoryId}}",
  "name": "√âlectronique et High-Tech",
  "description": "Smartphones, ordinateurs, accessoires et gadgets √©lectroniques"
}

###
# 10. METTRE √Ä JOUR UNE CAT√âGORIE (PATCH - route sp√©cifique)
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "description": "Cat√©gorie mise √† jour avec une nouvelle description",
  "imageUrl": "https://example.com/new-category-image.jpg"
}

###
# 11. METTRE √Ä JOUR LE NOM D'UNE CAT√âGORIE
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "name": "√âlectronique Premium"
}

###
# 12. D√âSACTIVER UNE CAT√âGORIE
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "isActive": false
}

###
# 13. R√âACTIVER UNE CAT√âGORIE
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "isActive": true
}

###
# 14. METTRE √Ä JOUR L'IMAGE D'UNE CAT√âGORIE
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "imageUrl": "https://example.com/updated-category-banner.jpg"
}

###
# 15. SUPPRIMER UNE CAT√âGORIE (DELETE - route g√©n√©rale)
DELETE {{baseUrl}}/api/category
Content-Type: application/json

{
  "id": "{{categoryId}}"
}

###
# 16. SUPPRIMER UNE CAT√âGORIE (DELETE - route sp√©cifique)
DELETE {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

###
# ========================================
# TESTS D'ERREURS ET CAS LIMITES
# ========================================

###
# 17. ERREUR - Cr√©er une cat√©gorie sans nom
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "description": "Cat√©gorie sans nom",
  "shopId": "{{shopId}}"
}

###
# 18. ERREUR - Cr√©er une cat√©gorie avec nom vide
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "",
  "description": "Cat√©gorie avec nom vide",
  "shopId": "{{shopId}}"
}

###
# 19. ERREUR - Cr√©er une cat√©gorie avec nom uniquement des espaces
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "   ",
  "description": "Cat√©gorie avec nom d'espaces",
  "shopId": "{{shopId}}"
}

###
# 20. ERREUR - Cr√©er une cat√©gorie sans shopId
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Cat√©gorie sans boutique",
  "description": "Cette cat√©gorie n'a pas de boutique associ√©e"
}

###
# 21. ERREUR - Cr√©er une cat√©gorie avec shopId inexistant
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Cat√©gorie boutique inexistante",
  "shopId": "00000000-0000-0000-0000-000000000000"
}

###
# 22. ERREUR - Cr√©er une cat√©gorie avec nom en doublon
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "√âlectronique",
  "description": "Doublon du nom de cat√©gorie",
  "shopId": "{{shopId}}"
}

###
# 23. ERREUR - R√©cup√©rer une cat√©gorie avec ID invalide
GET {{baseUrl}}/api/category/invalid-id
Content-Type: application/json

###
# 24. ERREUR - R√©cup√©rer une cat√©gorie inexistante
GET {{baseUrl}}/api/category/00000000-0000-0000-0000-000000000000
Content-Type: application/json

###
# 25. ERREUR - Modifier une cat√©gorie sans ID
PATCH {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Nouveau nom"
}

###
# 26. ERREUR - Modifier une cat√©gorie avec ID invalide
PATCH {{baseUrl}}/api/category/invalid-id
Content-Type: application/json

{
  "name": "Nouveau nom"
}

###
# 27. ERREUR - Modifier une cat√©gorie inexistante
PATCH {{baseUrl}}/api/category/00000000-0000-0000-0000-000000000000
Content-Type: application/json

{
  "name": "Nouveau nom"
}

###
# 28. ERREUR - Modifier une cat√©gorie avec nom vide
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "name": ""
}

###
# 29. ERREUR - Modifier une cat√©gorie avec nom en doublon
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "name": "V√™tements"
}

###
# 30. ERREUR - Modifier une cat√©gorie sans donn√©es
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{}

###
# 31. ERREUR - Supprimer une cat√©gorie sans ID
DELETE {{baseUrl}}/api/category
Content-Type: application/json

{}

###
# 32. ERREUR - Supprimer une cat√©gorie avec ID invalide
DELETE {{baseUrl}}/api/category/invalid-id
Content-Type: application/json

###
# 33. ERREUR - Supprimer une cat√©gorie inexistante
DELETE {{baseUrl}}/api/category/00000000-0000-0000-0000-000000000000
Content-Type: application/json

###
# 34. ERREUR - Supprimer une cat√©gorie avec produits li√©s
# (Ce test n√©cessite une cat√©gorie qui contient des produits)
DELETE {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

###
# ========================================
# TESTS DE PERFORMANCE ET LIMITES
# ========================================

###
# 35. TEST - Cr√©er une cat√©gorie avec nom tr√®s long
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Cat√©gorie avec un nom extr√™mement long qui d√©passe probablement les limites normales d'un nom de cat√©gorie standard",
  "description": "Test de limite de longueur",
  "shopId": "{{shopId}}"
}

###
# 36. TEST - Cr√©er une cat√©gorie avec description tr√®s longue
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Cat√©gorie description longue",
  "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.",
  "shopId": "{{shopId}}"
}

###
# 37. TEST - Cr√©er une cat√©gorie avec URL d'image tr√®s longue
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Cat√©gorie URL longue",
  "description": "Test avec URL d'image tr√®s longue",
  "imageUrl": "https://example.com/very/long/path/to/image/with/many/subdirectories/and/a/very/long/filename/that/might/cause/issues/category-image-with-extremely-long-name-for-testing-purposes.jpg?param1=value1&param2=value2&param3=value3&param4=value4",
  "shopId": "{{shopId}}"
}

###
# 38. TEST - Cr√©er plusieurs cat√©gories rapidement (test de performance)
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Sports et Loisirs",
  "description": "√âquipements sportifs et articles de loisirs",
  "shopId": "{{shopId}}"
}

###
# 39. TEST - Cr√©er une cat√©gorie avec caract√®res sp√©ciaux
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Beaut√© & Bien-√™tre üíÑ‚ú®",
  "description": "Produits de beaut√©, cosm√©tiques et bien-√™tre avec √©mojis üåü",
  "shopId": "{{shopId}}"
}

###
# 40. TEST - Cr√©er une cat√©gorie avec caract√®res Unicode
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Livres & √âducation",
  "description": "Livres, manuels scolaires et mat√©riel √©ducatif - Fran√ßais, English, ‰∏≠Êñá, ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",
  "shopId": "{{shopId}}"
}

###
# 41. TEST - R√©cup√©rer les cat√©gories avec filtres multiples
GET {{baseUrl}}/api/category?shopId={{shopId}}&isActive=false
Content-Type: application/json

###
# 42. TEST - Mettre √† jour une cat√©gorie avec tous les champs
PATCH {{baseUrl}}/api/category/{{categoryId}}
Content-Type: application/json

{
  "name": "√âlectronique et Informatique",
  "description": "Ordinateurs, smartphones, tablettes et tous les accessoires high-tech",
  "imageUrl": "https://example.com/electronics-updated.jpg",
  "isActive": true
}

###
# 43. TEST - Cr√©er une cat√©gorie avec isActive explicitement false
POST {{baseUrl}}/api/category
Content-Type: application/json

{
  "name": "Cat√©gorie Inactive",
  "description": "Cette cat√©gorie est cr√©√©e comme inactive",
  "isActive": false,
  "shopId": "{{shopId}}"
}